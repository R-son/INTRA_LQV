!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).Dropbox={})}(this,(function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var r=0;t.length>r;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function s(e,t,s){return t&&r(e.prototype,t),s&&r(e,s),e}var i="user",n={};function u(e){var t="000".concat(e.charCodeAt(0).toString(16)).slice(-4);return"\\u".concat(t)}function a(e){return"https://".concat(e,".dropboxapi.com/2/")}function o(e){return JSON.stringify(e).replace(/[\u007f-\uffff]/g,u)}function c(e){return new Date(Date.now()+1e3*e)}function p(){return"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope||"undefined"==typeof module||"undefined"!=typeof window}n.accountSetProfilePhoto=function(e){return this.request("account/set_profile_photo",e,"user","api","rpc")},n.authTokenFromOauth1=function(e){return this.request("auth/token/from_oauth1",e,"app","api","rpc")},n.authTokenRevoke=function(){return this.request("auth/token/revoke",null,"user","api","rpc")},n.checkApp=function(e){return this.request("check/app",e,"app","api","rpc")},n.checkUser=function(e){return this.request("check/user",e,"user","api","rpc")},n.contactsDeleteManualContacts=function(){return this.request("contacts/delete_manual_contacts",null,"user","api","rpc")},n.contactsDeleteManualContactsBatch=function(e){return this.request("contacts/delete_manual_contacts_batch",e,"user","api","rpc")},n.filePropertiesPropertiesAdd=function(e){return this.request("file_properties/properties/add",e,"user","api","rpc")},n.filePropertiesPropertiesOverwrite=function(e){return this.request("file_properties/properties/overwrite",e,"user","api","rpc")},n.filePropertiesPropertiesRemove=function(e){return this.request("file_properties/properties/remove",e,"user","api","rpc")},n.filePropertiesPropertiesSearch=function(e){return this.request("file_properties/properties/search",e,"user","api","rpc")},n.filePropertiesPropertiesSearchContinue=function(e){return this.request("file_properties/properties/search/continue",e,"user","api","rpc")},n.filePropertiesPropertiesUpdate=function(e){return this.request("file_properties/properties/update",e,"user","api","rpc")},n.filePropertiesTemplatesAddForTeam=function(e){return this.request("file_properties/templates/add_for_team",e,"team","api","rpc")},n.filePropertiesTemplatesAddForUser=function(e){return this.request("file_properties/templates/add_for_user",e,"user","api","rpc")},n.filePropertiesTemplatesGetForTeam=function(e){return this.request("file_properties/templates/get_for_team",e,"team","api","rpc")},n.filePropertiesTemplatesGetForUser=function(e){return this.request("file_properties/templates/get_for_user",e,"user","api","rpc")},n.filePropertiesTemplatesListForTeam=function(){return this.request("file_properties/templates/list_for_team",null,"team","api","rpc")},n.filePropertiesTemplatesListForUser=function(){return this.request("file_properties/templates/list_for_user",null,"user","api","rpc")},n.filePropertiesTemplatesRemoveForTeam=function(e){return this.request("file_properties/templates/remove_for_team",e,"team","api","rpc")},n.filePropertiesTemplatesRemoveForUser=function(e){return this.request("file_properties/templates/remove_for_user",e,"user","api","rpc")},n.filePropertiesTemplatesUpdateForTeam=function(e){return this.request("file_properties/templates/update_for_team",e,"team","api","rpc")},n.filePropertiesTemplatesUpdateForUser=function(e){return this.request("file_properties/templates/update_for_user",e,"user","api","rpc")},n.fileRequestsCount=function(){return this.request("file_requests/count",null,"user","api","rpc")},n.fileRequestsCreate=function(e){return this.request("file_requests/create",e,"user","api","rpc")},n.fileRequestsDelete=function(e){return this.request("file_requests/delete",e,"user","api","rpc")},n.fileRequestsDeleteAllClosed=function(){return this.request("file_requests/delete_all_closed",null,"user","api","rpc")},n.fileRequestsGet=function(e){return this.request("file_requests/get",e,"user","api","rpc")},n.fileRequestsListV2=function(e){return this.request("file_requests/list_v2",e,"user","api","rpc")},n.fileRequestsList=function(){return this.request("file_requests/list",null,"user","api","rpc")},n.fileRequestsListContinue=function(e){return this.request("file_requests/list/continue",e,"user","api","rpc")},n.fileRequestsUpdate=function(e){return this.request("file_requests/update",e,"user","api","rpc")},n.filesAlphaGetMetadata=function(e){return this.request("files/alpha/get_metadata",e,"user","api","rpc")},n.filesAlphaUpload=function(e){return this.request("files/alpha/upload",e,"user","content","upload")},n.filesCopyV2=function(e){return this.request("files/copy_v2",e,"user","api","rpc")},n.filesCopy=function(e){return this.request("files/copy",e,"user","api","rpc")},n.filesCopyBatchV2=function(e){return this.request("files/copy_batch_v2",e,"user","api","rpc")},n.filesCopyBatch=function(e){return this.request("files/copy_batch",e,"user","api","rpc")},n.filesCopyBatchCheckV2=function(e){return this.request("files/copy_batch/check_v2",e,"user","api","rpc")},n.filesCopyBatchCheck=function(e){return this.request("files/copy_batch/check",e,"user","api","rpc")},n.filesCopyReferenceGet=function(e){return this.request("files/copy_reference/get",e,"user","api","rpc")},n.filesCopyReferenceSave=function(e){return this.request("files/copy_reference/save",e,"user","api","rpc")},n.filesCreateFolderV2=function(e){return this.request("files/create_folder_v2",e,"user","api","rpc")},n.filesCreateFolder=function(e){return this.request("files/create_folder",e,"user","api","rpc")},n.filesCreateFolderBatch=function(e){return this.request("files/create_folder_batch",e,"user","api","rpc")},n.filesCreateFolderBatchCheck=function(e){return this.request("files/create_folder_batch/check",e,"user","api","rpc")},n.filesDeleteV2=function(e){return this.request("files/delete_v2",e,"user","api","rpc")},n.filesDelete=function(e){return this.request("files/delete",e,"user","api","rpc")},n.filesDeleteBatch=function(e){return this.request("files/delete_batch",e,"user","api","rpc")},n.filesDeleteBatchCheck=function(e){return this.request("files/delete_batch/check",e,"user","api","rpc")},n.filesDownload=function(e){return this.request("files/download",e,"user","content","download")},n.filesDownloadZip=function(e){return this.request("files/download_zip",e,"user","content","download")},n.filesExport=function(e){return this.request("files/export",e,"user","content","download")},n.filesGetFileLockBatch=function(e){return this.request("files/get_file_lock_batch",e,"user","api","rpc")},n.filesGetMetadata=function(e){return this.request("files/get_metadata",e,"user","api","rpc")},n.filesGetPreview=function(e){return this.request("files/get_preview",e,"user","content","download")},n.filesGetTemporaryLink=function(e){return this.request("files/get_temporary_link",e,"user","api","rpc")},n.filesGetTemporaryUploadLink=function(e){return this.request("files/get_temporary_upload_link",e,"user","api","rpc")},n.filesGetThumbnail=function(e){return this.request("files/get_thumbnail",e,"user","content","download")},n.filesGetThumbnailV2=function(e){return this.request("files/get_thumbnail_v2",e,"app, user","content","download")},n.filesGetThumbnailBatch=function(e){return this.request("files/get_thumbnail_batch",e,"user","content","rpc")},n.filesListFolder=function(e){return this.request("files/list_folder",e,"user","api","rpc")},n.filesListFolderContinue=function(e){return this.request("files/list_folder/continue",e,"user","api","rpc")},n.filesListFolderGetLatestCursor=function(e){return this.request("files/list_folder/get_latest_cursor",e,"user","api","rpc")},n.filesListFolderLongpoll=function(e){return this.request("files/list_folder/longpoll",e,"noauth","notify","rpc")},n.filesListRevisions=function(e){return this.request("files/list_revisions",e,"user","api","rpc")},n.filesLockFileBatch=function(e){return this.request("files/lock_file_batch",e,"user","api","rpc")},n.filesMoveV2=function(e){return this.request("files/move_v2",e,"user","api","rpc")},n.filesMove=function(e){return this.request("files/move",e,"user","api","rpc")},n.filesMoveBatchV2=function(e){return this.request("files/move_batch_v2",e,"user","api","rpc")},n.filesMoveBatch=function(e){return this.request("files/move_batch",e,"user","api","rpc")},n.filesMoveBatchCheckV2=function(e){return this.request("files/move_batch/check_v2",e,"user","api","rpc")},n.filesMoveBatchCheck=function(e){return this.request("files/move_batch/check",e,"user","api","rpc")},n.filesPermanentlyDelete=function(e){return this.request("files/permanently_delete",e,"user","api","rpc")},n.filesPropertiesAdd=function(e){return this.request("files/properties/add",e,"user","api","rpc")},n.filesPropertiesOverwrite=function(e){return this.request("files/properties/overwrite",e,"user","api","rpc")},n.filesPropertiesRemove=function(e){return this.request("files/properties/remove",e,"user","api","rpc")},n.filesPropertiesTemplateGet=function(e){return this.request("files/properties/template/get",e,"user","api","rpc")},n.filesPropertiesTemplateList=function(){return this.request("files/properties/template/list",null,"user","api","rpc")},n.filesPropertiesUpdate=function(e){return this.request("files/properties/update",e,"user","api","rpc")},n.filesRestore=function(e){return this.request("files/restore",e,"user","api","rpc")},n.filesSaveUrl=function(e){return this.request("files/save_url",e,"user","api","rpc")},n.filesSaveUrlCheckJobStatus=function(e){return this.request("files/save_url/check_job_status",e,"user","api","rpc")},n.filesSearch=function(e){return this.request("files/search",e,"user","api","rpc")},n.filesSearchV2=function(e){return this.request("files/search_v2",e,"user","api","rpc")},n.filesSearchContinueV2=function(e){return this.request("files/search/continue_v2",e,"user","api","rpc")},n.filesUnlockFileBatch=function(e){return this.request("files/unlock_file_batch",e,"user","api","rpc")},n.filesUpload=function(e){return this.request("files/upload",e,"user","content","upload")},n.filesUploadSessionAppendV2=function(e){return this.request("files/upload_session/append_v2",e,"user","content","upload")},n.filesUploadSessionAppend=function(e){return this.request("files/upload_session/append",e,"user","content","upload")},n.filesUploadSessionFinish=function(e){return this.request("files/upload_session/finish",e,"user","content","upload")},n.filesUploadSessionFinishBatch=function(e){return this.request("files/upload_session/finish_batch",e,"user","api","rpc")},n.filesUploadSessionFinishBatchCheck=function(e){return this.request("files/upload_session/finish_batch/check",e,"user","api","rpc")},n.filesUploadSessionStart=function(e){return this.request("files/upload_session/start",e,"user","content","upload")},n.paperDocsArchive=function(e){return this.request("paper/docs/archive",e,"user","api","rpc")},n.paperDocsCreate=function(e){return this.request("paper/docs/create",e,"user","api","upload")},n.paperDocsDownload=function(e){return this.request("paper/docs/download",e,"user","api","download")},n.paperDocsFolderUsersList=function(e){return this.request("paper/docs/folder_users/list",e,"user","api","rpc")},n.paperDocsFolderUsersListContinue=function(e){return this.request("paper/docs/folder_users/list/continue",e,"user","api","rpc")},n.paperDocsGetFolderInfo=function(e){return this.request("paper/docs/get_folder_info",e,"user","api","rpc")},n.paperDocsList=function(e){return this.request("paper/docs/list",e,"user","api","rpc")},n.paperDocsListContinue=function(e){return this.request("paper/docs/list/continue",e,"user","api","rpc")},n.paperDocsPermanentlyDelete=function(e){return this.request("paper/docs/permanently_delete",e,"user","api","rpc")},n.paperDocsSharingPolicyGet=function(e){return this.request("paper/docs/sharing_policy/get",e,"user","api","rpc")},n.paperDocsSharingPolicySet=function(e){return this.request("paper/docs/sharing_policy/set",e,"user","api","rpc")},n.paperDocsUpdate=function(e){return this.request("paper/docs/update",e,"user","api","upload")},n.paperDocsUsersAdd=function(e){return this.request("paper/docs/users/add",e,"user","api","rpc")},n.paperDocsUsersList=function(e){return this.request("paper/docs/users/list",e,"user","api","rpc")},n.paperDocsUsersListContinue=function(e){return this.request("paper/docs/users/list/continue",e,"user","api","rpc")},n.paperDocsUsersRemove=function(e){return this.request("paper/docs/users/remove",e,"user","api","rpc")},n.paperFoldersCreate=function(e){return this.request("paper/folders/create",e,"user","api","rpc")},n.sharingAddFileMember=function(e){return this.request("sharing/add_file_member",e,"user","api","rpc")},n.sharingAddFolderMember=function(e){return this.request("sharing/add_folder_member",e,"user","api","rpc")},n.sharingChangeFileMemberAccess=function(e){return this.request("sharing/change_file_member_access",e,"user","api","rpc")},n.sharingCheckJobStatus=function(e){return this.request("sharing/check_job_status",e,"user","api","rpc")},n.sharingCheckRemoveMemberJobStatus=function(e){return this.request("sharing/check_remove_member_job_status",e,"user","api","rpc")},n.sharingCheckShareJobStatus=function(e){return this.request("sharing/check_share_job_status",e,"user","api","rpc")},n.sharingCreateSharedLink=function(e){return this.request("sharing/create_shared_link",e,"user","api","rpc")},n.sharingCreateSharedLinkWithSettings=function(e){return this.request("sharing/create_shared_link_with_settings",e,"user","api","rpc")},n.sharingGetFileMetadata=function(e){return this.request("sharing/get_file_metadata",e,"user","api","rpc")},n.sharingGetFileMetadataBatch=function(e){return this.request("sharing/get_file_metadata/batch",e,"user","api","rpc")},n.sharingGetFolderMetadata=function(e){return this.request("sharing/get_folder_metadata",e,"user","api","rpc")},n.sharingGetSharedLinkFile=function(e){return this.request("sharing/get_shared_link_file",e,"user","content","download")},n.sharingGetSharedLinkMetadata=function(e){return this.request("sharing/get_shared_link_metadata",e,"user","api","rpc")},n.sharingGetSharedLinks=function(e){return this.request("sharing/get_shared_links",e,"user","api","rpc")},n.sharingListFileMembers=function(e){return this.request("sharing/list_file_members",e,"user","api","rpc")},n.sharingListFileMembersBatch=function(e){return this.request("sharing/list_file_members/batch",e,"user","api","rpc")},n.sharingListFileMembersContinue=function(e){return this.request("sharing/list_file_members/continue",e,"user","api","rpc")},n.sharingListFolderMembers=function(e){return this.request("sharing/list_folder_members",e,"user","api","rpc")},n.sharingListFolderMembersContinue=function(e){return this.request("sharing/list_folder_members/continue",e,"user","api","rpc")},n.sharingListFolders=function(e){return this.request("sharing/list_folders",e,"user","api","rpc")},n.sharingListFoldersContinue=function(e){return this.request("sharing/list_folders/continue",e,"user","api","rpc")},n.sharingListMountableFolders=function(e){return this.request("sharing/list_mountable_folders",e,"user","api","rpc")},n.sharingListMountableFoldersContinue=function(e){return this.request("sharing/list_mountable_folders/continue",e,"user","api","rpc")},n.sharingListReceivedFiles=function(e){return this.request("sharing/list_received_files",e,"user","api","rpc")},n.sharingListReceivedFilesContinue=function(e){return this.request("sharing/list_received_files/continue",e,"user","api","rpc")},n.sharingListSharedLinks=function(e){return this.request("sharing/list_shared_links",e,"user","api","rpc")},n.sharingModifySharedLinkSettings=function(e){return this.request("sharing/modify_shared_link_settings",e,"user","api","rpc")},n.sharingMountFolder=function(e){return this.request("sharing/mount_folder",e,"user","api","rpc")},n.sharingRelinquishFileMembership=function(e){return this.request("sharing/relinquish_file_membership",e,"user","api","rpc")},n.sharingRelinquishFolderMembership=function(e){return this.request("sharing/relinquish_folder_membership",e,"user","api","rpc")},n.sharingRemoveFileMember=function(e){return this.request("sharing/remove_file_member",e,"user","api","rpc")},n.sharingRemoveFileMember2=function(e){return this.request("sharing/remove_file_member_2",e,"user","api","rpc")},n.sharingRemoveFolderMember=function(e){return this.request("sharing/remove_folder_member",e,"user","api","rpc")},n.sharingRevokeSharedLink=function(e){return this.request("sharing/revoke_shared_link",e,"user","api","rpc")},n.sharingSetAccessInheritance=function(e){return this.request("sharing/set_access_inheritance",e,"user","api","rpc")},n.sharingShareFolder=function(e){return this.request("sharing/share_folder",e,"user","api","rpc")},n.sharingTransferFolder=function(e){return this.request("sharing/transfer_folder",e,"user","api","rpc")},n.sharingUnmountFolder=function(e){return this.request("sharing/unmount_folder",e,"user","api","rpc")},n.sharingUnshareFile=function(e){return this.request("sharing/unshare_file",e,"user","api","rpc")},n.sharingUnshareFolder=function(e){return this.request("sharing/unshare_folder",e,"user","api","rpc")},n.sharingUpdateFileMember=function(e){return this.request("sharing/update_file_member",e,"user","api","rpc")},n.sharingUpdateFolderMember=function(e){return this.request("sharing/update_folder_member",e,"user","api","rpc")},n.sharingUpdateFolderPolicy=function(e){return this.request("sharing/update_folder_policy",e,"user","api","rpc")},n.teamDevicesListMemberDevices=function(e){return this.request("team/devices/list_member_devices",e,"team","api","rpc")},n.teamDevicesListMembersDevices=function(e){return this.request("team/devices/list_members_devices",e,"team","api","rpc")},n.teamDevicesListTeamDevices=function(e){return this.request("team/devices/list_team_devices",e,"team","api","rpc")},n.teamDevicesRevokeDeviceSession=function(e){return this.request("team/devices/revoke_device_session",e,"team","api","rpc")},n.teamDevicesRevokeDeviceSessionBatch=function(e){return this.request("team/devices/revoke_device_session_batch",e,"team","api","rpc")},n.teamFeaturesGetValues=function(e){return this.request("team/features/get_values",e,"team","api","rpc")},n.teamGetInfo=function(){return this.request("team/get_info",null,"team","api","rpc")},n.teamGroupsCreate=function(e){return this.request("team/groups/create",e,"team","api","rpc")},n.teamGroupsDelete=function(e){return this.request("team/groups/delete",e,"team","api","rpc")},n.teamGroupsGetInfo=function(e){return this.request("team/groups/get_info",e,"team","api","rpc")},n.teamGroupsJobStatusGet=function(e){return this.request("team/groups/job_status/get",e,"team","api","rpc")},n.teamGroupsList=function(e){return this.request("team/groups/list",e,"team","api","rpc")},n.teamGroupsListContinue=function(e){return this.request("team/groups/list/continue",e,"team","api","rpc")},n.teamGroupsMembersAdd=function(e){return this.request("team/groups/members/add",e,"team","api","rpc")},n.teamGroupsMembersList=function(e){return this.request("team/groups/members/list",e,"team","api","rpc")},n.teamGroupsMembersListContinue=function(e){return this.request("team/groups/members/list/continue",e,"team","api","rpc")},n.teamGroupsMembersRemove=function(e){return this.request("team/groups/members/remove",e,"team","api","rpc")},n.teamGroupsMembersSetAccessType=function(e){return this.request("team/groups/members/set_access_type",e,"team","api","rpc")},n.teamGroupsUpdate=function(e){return this.request("team/groups/update",e,"team","api","rpc")},n.teamLegalHoldsCreatePolicy=function(e){return this.request("team/legal_holds/create_policy",e,"team","api","rpc")},n.teamLegalHoldsGetPolicy=function(e){return this.request("team/legal_holds/get_policy",e,"team","api","rpc")},n.teamLegalHoldsListHeldRevisions=function(e){return this.request("team/legal_holds/list_held_revisions",e,"team","api","rpc")},n.teamLegalHoldsListHeldRevisionsContinue=function(e){return this.request("team/legal_holds/list_held_revisions_continue",e,"team","api","rpc")},n.teamLegalHoldsListPolicies=function(e){return this.request("team/legal_holds/list_policies",e,"team","api","rpc")},n.teamLegalHoldsReleasePolicy=function(e){return this.request("team/legal_holds/release_policy",e,"team","api","rpc")},n.teamLegalHoldsUpdatePolicy=function(e){return this.request("team/legal_holds/update_policy",e,"team","api","rpc")},n.teamLinkedAppsListMemberLinkedApps=function(e){return this.request("team/linked_apps/list_member_linked_apps",e,"team","api","rpc")},n.teamLinkedAppsListMembersLinkedApps=function(e){return this.request("team/linked_apps/list_members_linked_apps",e,"team","api","rpc")},n.teamLinkedAppsListTeamLinkedApps=function(e){return this.request("team/linked_apps/list_team_linked_apps",e,"team","api","rpc")},n.teamLinkedAppsRevokeLinkedApp=function(e){return this.request("team/linked_apps/revoke_linked_app",e,"team","api","rpc")},n.teamLinkedAppsRevokeLinkedAppBatch=function(e){return this.request("team/linked_apps/revoke_linked_app_batch",e,"team","api","rpc")},n.teamMemberSpaceLimitsExcludedUsersAdd=function(e){return this.request("team/member_space_limits/excluded_users/add",e,"team","api","rpc")},n.teamMemberSpaceLimitsExcludedUsersList=function(e){return this.request("team/member_space_limits/excluded_users/list",e,"team","api","rpc")},n.teamMemberSpaceLimitsExcludedUsersListContinue=function(e){return this.request("team/member_space_limits/excluded_users/list/continue",e,"team","api","rpc")},n.teamMemberSpaceLimitsExcludedUsersRemove=function(e){return this.request("team/member_space_limits/excluded_users/remove",e,"team","api","rpc")},n.teamMemberSpaceLimitsGetCustomQuota=function(e){return this.request("team/member_space_limits/get_custom_quota",e,"team","api","rpc")},n.teamMemberSpaceLimitsRemoveCustomQuota=function(e){return this.request("team/member_space_limits/remove_custom_quota",e,"team","api","rpc")},n.teamMemberSpaceLimitsSetCustomQuota=function(e){return this.request("team/member_space_limits/set_custom_quota",e,"team","api","rpc")},n.teamMembersAdd=function(e){return this.request("team/members/add",e,"team","api","rpc")},n.teamMembersAddJobStatusGet=function(e){return this.request("team/members/add/job_status/get",e,"team","api","rpc")},n.teamMembersDeleteProfilePhoto=function(e){return this.request("team/members/delete_profile_photo",e,"team","api","rpc")},n.teamMembersGetInfo=function(e){return this.request("team/members/get_info",e,"team","api","rpc")},n.teamMembersList=function(e){return this.request("team/members/list",e,"team","api","rpc")},n.teamMembersListContinue=function(e){return this.request("team/members/list/continue",e,"team","api","rpc")},n.teamMembersMoveFormerMemberFiles=function(e){return this.request("team/members/move_former_member_files",e,"team","api","rpc")},n.teamMembersMoveFormerMemberFilesJobStatusCheck=function(e){return this.request("team/members/move_former_member_files/job_status/check",e,"team","api","rpc")},n.teamMembersRecover=function(e){return this.request("team/members/recover",e,"team","api","rpc")},n.teamMembersRemove=function(e){return this.request("team/members/remove",e,"team","api","rpc")},n.teamMembersRemoveJobStatusGet=function(e){return this.request("team/members/remove/job_status/get",e,"team","api","rpc")},n.teamMembersSecondaryEmailsAdd=function(e){return this.request("team/members/secondary_emails/add",e,"team","api","rpc")},n.teamMembersSecondaryEmailsDelete=function(e){return this.request("team/members/secondary_emails/delete",e,"team","api","rpc")},n.teamMembersSecondaryEmailsResendVerificationEmails=function(e){return this.request("team/members/secondary_emails/resend_verification_emails",e,"team","api","rpc")},n.teamMembersSendWelcomeEmail=function(e){return this.request("team/members/send_welcome_email",e,"team","api","rpc")},n.teamMembersSetAdminPermissions=function(e){return this.request("team/members/set_admin_permissions",e,"team","api","rpc")},n.teamMembersSetProfile=function(e){return this.request("team/members/set_profile",e,"team","api","rpc")},n.teamMembersSetProfilePhoto=function(e){return this.request("team/members/set_profile_photo",e,"team","api","rpc")},n.teamMembersSuspend=function(e){return this.request("team/members/suspend",e,"team","api","rpc")},n.teamMembersUnsuspend=function(e){return this.request("team/members/unsuspend",e,"team","api","rpc")},n.teamNamespacesList=function(e){return this.request("team/namespaces/list",e,"team","api","rpc")},n.teamNamespacesListContinue=function(e){return this.request("team/namespaces/list/continue",e,"team","api","rpc")},n.teamPropertiesTemplateAdd=function(e){return this.request("team/properties/template/add",e,"team","api","rpc")},n.teamPropertiesTemplateGet=function(e){return this.request("team/properties/template/get",e,"team","api","rpc")},n.teamPropertiesTemplateList=function(){return this.request("team/properties/template/list",null,"team","api","rpc")},n.teamPropertiesTemplateUpdate=function(e){return this.request("team/properties/template/update",e,"team","api","rpc")},n.teamReportsGetActivity=function(e){return this.request("team/reports/get_activity",e,"team","api","rpc")},n.teamReportsGetDevices=function(e){return this.request("team/reports/get_devices",e,"team","api","rpc")},n.teamReportsGetMembership=function(e){return this.request("team/reports/get_membership",e,"team","api","rpc")},n.teamReportsGetStorage=function(e){return this.request("team/reports/get_storage",e,"team","api","rpc")},n.teamTeamFolderActivate=function(e){return this.request("team/team_folder/activate",e,"team","api","rpc")},n.teamTeamFolderArchive=function(e){return this.request("team/team_folder/archive",e,"team","api","rpc")},n.teamTeamFolderArchiveCheck=function(e){return this.request("team/team_folder/archive/check",e,"team","api","rpc")},n.teamTeamFolderCreate=function(e){return this.request("team/team_folder/create",e,"team","api","rpc")},n.teamTeamFolderGetInfo=function(e){return this.request("team/team_folder/get_info",e,"team","api","rpc")},n.teamTeamFolderList=function(e){return this.request("team/team_folder/list",e,"team","api","rpc")},n.teamTeamFolderListContinue=function(e){return this.request("team/team_folder/list/continue",e,"team","api","rpc")},n.teamTeamFolderPermanentlyDelete=function(e){return this.request("team/team_folder/permanently_delete",e,"team","api","rpc")},n.teamTeamFolderRename=function(e){return this.request("team/team_folder/rename",e,"team","api","rpc")},n.teamTeamFolderUpdateSyncSettings=function(e){return this.request("team/team_folder/update_sync_settings",e,"team","api","rpc")},n.teamTokenGetAuthenticatedAdmin=function(){return this.request("team/token/get_authenticated_admin",null,"team","api","rpc")},n.teamLogGetEvents=function(e){return this.request("team_log/get_events",e,"team","api","rpc")},n.teamLogGetEventsContinue=function(e){return this.request("team_log/get_events/continue",e,"team","api","rpc")},n.usersFeaturesGetValues=function(e){return this.request("users/features/get_values",e,"user","api","rpc")},n.usersGetAccount=function(e){return this.request("users/get_account",e,"user","api","rpc")},n.usersGetAccountBatch=function(e){return this.request("users/get_account_batch",e,"user","api","rpc")},n.usersGetCurrentAccount=function(){return this.request("users/get_current_account",null,"user","api","rpc")},n.usersGetSpaceUsage=function(){return this.request("users/get_space_usage",null,"user","api","rpc")};var l,h,f=function e(r,s,i){t(this,e),this.status=r,this.headers=s,this.result=i};function m(e){var t=e.clone();return e.ok?e.json().catch((function(){t.text()})).then((function(t){return new f(e.status,e.headers,t)})):e.text().then((function(t){throw{error:t,response:e,status:e.status}}))}try{l=require("node-fetch")}catch(e){l=window.fetch.bind(window)}try{h=require("crypto")}catch(e){h=window.crypto||window.msCrypto}var d,_=["legacy","offline","online"],q=["code","token"],g=["none","user","team"],b="https://www.dropbox.com/oauth2/authorize",v="https://api.dropboxapi.com/oauth2/token",k=function(){function e(r){t(this,e),this.fetch=(r=r||{}).fetch||l,this.accessToken=r.accessToken,this.accessTokenExpiresAt=r.accessTokenExpiresAt,this.refreshToken=r.refreshToken,this.clientId=r.clientId,this.clientSecret=r.clientSecret}return s(e,[{key:"setAccessToken",value:function(e){this.accessToken=e}},{key:"getAccessToken",value:function(){return this.accessToken}},{key:"setClientId",value:function(e){this.clientId=e}},{key:"getClientId",value:function(){return this.clientId}},{key:"setClientSecret",value:function(e){this.clientSecret=e}},{key:"getClientSecret",value:function(){return this.clientSecret}},{key:"getRefreshToken",value:function(){return this.refreshToken}},{key:"setRefreshToken",value:function(e){this.refreshToken=e}},{key:"getAccessTokenExpiresAt",value:function(){return this.accessTokenExpiresAt}},{key:"setAccessTokenExpiresAt",value:function(e){this.accessTokenExpiresAt=e}},{key:"generatePKCECodes",value:function(){var e=h.randomBytes(128);e=e.toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"").substr(0,128),this.codeVerifier=e;var t=(new TextEncoder).encode(e),r=h.createHash("sha256").update(t).digest();r=r.toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,""),this.codeChallenge=r}},{key:"getAuthenticationUrl",value:function(e,t){var r,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"token",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"legacy",n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"none",a=arguments.length>6&&void 0!==arguments[6]&&arguments[6],o=this.getClientId(),c=b;if(!o)throw Error("A client id is required. You can set the client id using .setClientId().");if("code"!==s&&!e)throw Error("A redirect uri is required.");if(!q.includes(s))throw Error("Authorization type must be code or token");if(!_.includes(i))throw Error("Token Access Type must be legacy, offline, or online");if(n&&!(n instanceof Array))throw Error("Scope must be an array of strings");if(!g.includes(u))throw Error("includeGrantedScopes must be none, user, or team");return r="code"===s?"".concat(c,"?response_type=code&client_id=").concat(o):"".concat(c,"?response_type=token&client_id=").concat(o),e&&(r+="&redirect_uri=".concat(e)),t&&(r+="&state=".concat(t)),"legacy"!==i&&(r+="&token_access_type=".concat(i)),n&&(r+="&scope=".concat(n.join(" "))),"none"!==u&&(r+="&include_granted_scopes=".concat(u)),a&&(this.generatePKCECodes(),r+="&code_challenge_method=S256",r+="&code_challenge=".concat(this.codeChallenge)),r}},{key:"getAccessTokenFromCode",value:function(e,t){var r=this.getClientId(),s=this.getClientSecret();if(!r)throw Error("A client id is required. You can set the client id using .setClientId().");var i=v;if(i+="?grant_type=authorization_code",i+="&code=".concat(t),i+="&client_id=".concat(r),s)i+="&client_secret=".concat(s);else{if(!this.codeChallenge)throw Error("You must use PKCE when generating the authorization URL to not include a client secret");i+="&code_verifier=".concat(this.codeVerifier)}e&&(i+="&redirect_uri=".concat(e));return this.fetch(i,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(e){return m(e)}))}},{key:"checkAndRefreshAccessToken",value:function(){var e=this.getRefreshToken()&&this.getClientId(),t=this.getAccessTokenExpiresAt()&&new Date(Date.now()+3e5)>=this.getAccessTokenExpiresAt(),r=!this.getAccessToken();return(t||r)&&e?this.refreshAccessToken():Promise.resolve()}},{key:"refreshAccessToken",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=v,s=this.getClientId(),i=this.getClientSecret();if(!s)throw Error("A client id is required. You can set the client id using .setClientId().");if(t&&!(t instanceof Array))throw Error("Scope must be an array of strings");var n={"Content-Type":"application/json"};r+="?grant_type=refresh_token&refresh_token=".concat(this.getRefreshToken()),r+="&client_id=".concat(s),i&&(r+="&client_secret=".concat(i)),t&&(r+="&scope=".concat(t.join(" ")));var u={method:"POST"};return u.headers=n,this.fetch(r,u).then((function(e){return m(e)})).then((function(t){e.setAccessToken(t.result.access_token),e.setAccessTokenExpiresAt(c(t.result.expires_in))}))}},{key:"authenticateWithCordova",value:function(e,t){var r=this.getAuthenticationUrl("https://www.dropbox.com/1/oauth2/redirect_receiver"),s=!1,i=window.open(r,"_blank");function n(e){-999!==e.code&&(window.setTimeout((function(){i.close()}),10),t())}function u(r){if(r.url.indexOf("&error=")>-1)window.setTimeout((function(){i.close()}),10),t();else{var s="#access_token=",n=r.url.indexOf(s),u=r.url.indexOf("&token_type=");if(n>-1){n+=14,window.setTimeout((function(){i.close()}),10);var a=r.url.substring(n,u);e(a)}}}i.addEventListener("loaderror",n),i.addEventListener("loadstop",u),i.addEventListener("exit",(function e(){s||(i.removeEventListener("loaderror",n),i.removeEventListener("loadstop",u),i.removeEventListener("exit",e),s=!0)}))}}]),e}();try{d=require("node-fetch")}catch(e){d=window.fetch.bind(window)}var y="undefined"==typeof btoa?function(e){return Buffer.from(e).toString("base64")}:btoa;e.Dropbox=function(){function e(r){t(this,e),this.auth=(r=r||{}).auth?r.auth:new k(r),this.fetch=r.fetch||d,this.selectUser=r.selectUser,this.selectAdmin=r.selectAdmin,this.pathRoot=r.pathRoot,Object.assign(this,n)}return s(e,[{key:"request",value:function(e,t,r,s,i){switch(i){case"rpc":return this.rpcRequest(e,t,r,s);case"download":return this.downloadRequest(e,t,r,s);case"upload":return this.uploadRequest(e,t,r,s);default:throw Error("Invalid request style: ".concat(i))}}},{key:"rpcRequest",value:function(e,t,r,s){var n=this;return this.auth.checkAndRefreshAccessToken().then((function(){var e,s={method:"POST",body:t?JSON.stringify(t):null,headers:{}};switch(t&&(s.headers["Content-Type"]="application/json"),r){case"app":if(!n.auth.clientId||!n.auth.clientSecret)throw Error("A client id and secret is required for this function");e=y("".concat(n.auth.clientId,":").concat(n.auth.clientSecret)),s.headers.Authorization="Basic ".concat(e);break;case"team":case i:s.headers.Authorization="Bearer ".concat(n.auth.getAccessToken());break;case"noauth":break;default:throw Error("Unhandled auth type: ".concat(r))}return n.setCommonHeaders(s),s})).then((function(t){return n.fetch(a(s)+e,t)})).then((function(e){return m(e)}))}},{key:"downloadRequest",value:function(e,t,r,s){var n=this;return this.auth.checkAndRefreshAccessToken().then((function(){if(r!==i)throw Error("Unexpected auth type: ".concat(r));var e={method:"POST",headers:{Authorization:"Bearer ".concat(n.auth.getAccessToken()),"Dropbox-API-Arg":o(t)}};return n.setCommonHeaders(e),e})).then((function(t){return d(a(s)+e,t)})).then((function(e){return function(e){return new Promise((function(t){e.ok?p()?e.blob().then((function(e){return t(e)})):e.buffer().then((function(e){return t(e)})):e.text().then((function(e){return t(e)}))})).then((function(t){var r;if(!e.ok)throw{error:t,response:e,status:e.status};return r=JSON.parse(e.headers.get("dropbox-api-result")),p()?r.fileBlob=t:r.fileBinary=t,new f(e.status,e.headers,r)}))}(e)}))}},{key:"uploadRequest",value:function(e,t,r,s){var n=this;return this.auth.checkAndRefreshAccessToken().then((function(){if(r!==i)throw Error("Unexpected auth type: ".concat(r));var e=t.contents;delete t.contents;var s={body:e,method:"POST",headers:{Authorization:"Bearer ".concat(n.auth.getAccessToken()),"Content-Type":"application/octet-stream","Dropbox-API-Arg":o(t)}};return n.setCommonHeaders(s),s})).then((function(t){return n.fetch(a(s)+e,t)})).then((function(e){return m(e)}))}},{key:"setCommonHeaders",value:function(e){this.selectUser&&(e.headers["Dropbox-API-Select-User"]=this.selectUser),this.selectAdmin&&(e.headers["Dropbox-API-Select-Admin"]=this.selectAdmin),this.pathRoot&&(e.headers["Dropbox-API-Path-Root"]=this.pathRoot)}}]),e}(),e.DropboxAuth=k,Object.defineProperty(e,"__esModule",{value:!0})}));
